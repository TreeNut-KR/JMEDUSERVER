{"ast":null,"code":"import _regeneratorRuntime from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import axios from\"axios\";import Cookies from'js-cookie';import Button from\"../../Components/ButtonTop\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function LoginPage(){function loging(_x){return _loging.apply(this,arguments);}function _loging(){_loging=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var inputID,inputPW,response,userData,inOneHour;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();inputID=e.target.elements.ID.value;inputPW=e.target.elements.PASSWORD.value;_context.prev=3;_context.next=6;return axios.post(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/server/login\"),{username:inputID,password:inputPW},{withCredentials:true});case 6:response=_context.sent;console.log(response);if(response.data.success){alert(\"로그인 성공\");userData={name:inputID,author:\"admin\"};// 현재 시간으로부터 1시간 후를 계산\ninOneHour=new Date(new Date().getTime()+60*60*1000);Cookies.set('user',JSON.stringify(userData),{expires:inOneHour});window.location.href=\"/student\";}else{alert(\"로그인 실패: \"+response.data.message);}_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](3);if(_context.t0.response){console.log(_context.t0.response.data);console.log(_context.t0.response.status);console.log(_context.t0.response.headers);alert(\"통신 실패: \"+(_context.t0.response&&_context.t0.response.data?_context.t0.response.data.message:'알 수 없는 에러'));}else if(_context.t0.request){console.log(_context.t0.request);alert(\"서버로부터 응답이 없습니다: \"+_context.t0.message);}else{console.log(\"Error\",_context.t0.message);alert(\"통신 오류: \"+_context.t0.message);}console.log(_context.t0.config);case 15:case\"end\":return _context.stop();}},_callee,null,[[3,11]]);}));return _loging.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute w-[100vw] h-[100vh] top-0 left-0 bg-black opacity-50\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute w-[100vw] h-[100vh] top-0 left-0 flex justify-center items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-[450px] h-80 bg-white rounded-lg shadow-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between pt-2 pr-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fontA text-3xl pl-9 pt-2\",children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(Button,{label:\"X\",width:50,URL:\"/student\",bgColor:\"5272F2\"})]}),/*#__PURE__*/_jsx(\"form\",{onSubmit:function onSubmit(e){return loging(e);},className:\"flex justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"px-2 w-80 h-11 rounded-md border border-[#000000] my-7\",name:\"ID\",placeholder:\"\\uC544\\uC774\\uB514\"}),/*#__PURE__*/_jsx(\"input\",{className:\"px-2 w-80 h-11 rounded-md border border-[#000000]\",name:\"PASSWORD\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\",type:\"password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-evenly pt-6\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"text-xs w-20 h-10 px-2 rounded-md border bg-[#5272F2] text-white\",children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(Button,{label:\"\\uC2E0\\uADDC\\uB4F1\\uB85D\",width:80,URL:\"/register-page\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-extrabold pt-3 text-center\",children:\"\\uC2E0\\uADDC\\uB4F1\\uB85D\\uC744 \\uD1B5\\uD574 \\uC0C8\\uB85C\\uC6B4 \\uAD50\\uC0AC\\uC758 \\uACC4\\uC815 \\uCD94\\uAC00 \\uAC00\\uB2A5\"})]})})]})})]});}","map":{"version":3,"names":["React","axios","Cookies","Button","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginPage","loging","_x","_loging","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","inputID","inputPW","response","userData","inOneHour","wrap","_callee$","_context","prev","next","preventDefault","target","elements","ID","value","PASSWORD","post","concat","process","env","REACT_APP_SERVER_URL","username","password","withCredentials","sent","console","log","data","success","alert","name","author","Date","getTime","set","JSON","stringify","expires","window","location","href","message","t0","status","headers","request","config","stop","children","className","label","width","URL","bgColor","onSubmit","placeholder","type"],"sources":["D:/Git_Hub/JMEDUSERVER/react/sources/src/pages/login/signIn.jsx"],"sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport Cookies from 'js-cookie';\nimport Button from \"../../Components/ButtonTop\";\n\n\nexport default function LoginPage() {\n  async function loging(e) {\n    e.preventDefault();\n    const inputID = e.target.elements.ID.value;\n    const inputPW = e.target.elements.PASSWORD.value;\n\n    \n\n    \n\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_SERVER_URL}/server/login`, \n          { username: inputID, password: inputPW }, \n          { withCredentials: true }\n      );\n      console.log(response);\n  \n      if (response.data.success) {\n        alert(\"로그인 성공\");\n        const userData = { name: inputID, author: \"admin\" };\n    \n        // 현재 시간으로부터 1시간 후를 계산\n        const inOneHour = new Date(new Date().getTime() + 60 * 60 * 1000);\n    \n        Cookies.set('user', JSON.stringify(userData), { expires: inOneHour });\n        window.location.href = \"/student\";\n    } else {\n        alert(\"로그인 실패: \" + response.data.message);\n    }\n  } catch (error) {\n      if (error.response) {\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n          alert(\"통신 실패: \" + (error.response && error.response.data ? error.response.data.message : '알 수 없는 에러'));\n      } else if (error.request) {\n          console.log(error.request);\n          alert(\"서버로부터 응답이 없습니다: \" + error.message);\n      } else {\n          console.log(\"Error\", error.message);\n          alert(\"통신 오류: \" + error.message);\n      }\n      console.log(error.config);\n  }\n\n  }\n\n  return (\n    <>\n      <div className=\"absolute w-[100vw] h-[100vh] top-0 left-0 bg-black opacity-50\" />\n      <div className=\"absolute w-[100vw] h-[100vh] top-0 left-0 flex justify-center items-center\">\n        <div className=\"w-[450px] h-80 bg-white rounded-lg shadow-2xl\">\n          <div className=\"flex justify-between pt-2 pr-2\">\n            <span className=\"fontA text-3xl pl-9 pt-2\">로그인</span>\n            <Button\n              label={\"X\"}\n              width={50}\n              URL={\"/student\"}\n              bgColor={\"5272F2\"}\n            ></Button>\n          </div>\n          <form onSubmit={(e) => loging(e)} className=\"flex justify-center\">\n            <div className=\"flex flex-col\">\n              <input\n                className=\"px-2 w-80 h-11 rounded-md border border-[#000000] my-7\"\n                name=\"ID\"\n                placeholder=\"아이디\"\n              />\n              <input\n                className=\"px-2 w-80 h-11 rounded-md border border-[#000000]\"\n                name=\"PASSWORD\"\n                placeholder=\"비밀번호\"\n                type=\"password\"\n              />\n              <div className=\"flex justify-evenly pt-6\">\n                <button className=\"text-xs w-20 h-10 px-2 rounded-md border bg-[#5272F2] text-white\">\n                  로그인\n                </button>\n                <Button\n                  label=\"신규등록\"\n                  width={80}\n                  URL={\"/register-page\"}\n                ></Button>\n              </div>\n              <span className=\"text-xs font-extrabold pt-3 text-center\">\n                신규등록을 통해 새로운 교사의 계정 추가 가능\n              </span>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _regeneratorRuntime from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from\"react\";import SearchBox from\"../../Components/searchBox/SearchBox\";import{useState}from\"react\";import BasicBox from\"../../Components/manage-box/BasicBox\";import axios from\"axios\";import{EDIT_TEACHER}from\"../../constants/searchFilter\";import{Toast,notify}from\"../../template/Toastify\";import DataTableV2 from\"../../Components/dataTableV2/DataTableV2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ViewLog(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];useEffect(function(){loging();},[]);// 시간 형식 변환 함수\nvar formatTime=function formatTime(timeStr){var date=new Date(timeStr);var year=date.getFullYear();var month=String(date.getMonth()+1).padStart(2,\"0\");var day=String(date.getDate()).padStart(2,\"0\");var hours=String(date.getHours()).padStart(2,\"0\");var minutes=String(date.getMinutes()).padStart(2,\"0\");return\"\".concat(year,\"-\").concat(month,\"-\").concat(day,\" \").concat(hours,\"-\").concat(minutes);};// 데이터 가져오기\nfunction loging(){return _loging.apply(this,arguments);}//데이터 테이블에 보일 컬럼\nfunction _loging(){_loging=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,logs;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/server/log/view\"),{});case 3:response=_context.sent;logs=response.data.log.map(function(log){return _objectSpread(_objectSpread({},log),{},{time:formatTime(log.time)});});setData(logs);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return _loging.apply(this,arguments);}var columns=[{columnName:\"선생\",data:\"teacher\"},{columnName:\"시간\",data:\"time\"},{columnName:\"로그\",data:\"log\"}];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(BasicBox,{children:[/*#__PURE__*/_jsx(SearchBox,{setData:setData,option:\"teacher\"}),/*#__PURE__*/_jsx(DataTableV2,{title:\"로그 테이블\",columns:columns,datas:data,type:\"admin_log\"})]}),/*#__PURE__*/_jsx(Toast,{})]});}","map":{"version":3,"names":["React","useEffect","SearchBox","useState","BasicBox","axios","EDIT_TEACHER","Toast","notify","DataTableV2","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ViewLog","_useState","_useState2","_slicedToArray","data","setData","loging","formatTime","timeStr","date","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","concat","_loging","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","logs","wrap","_callee$","_context","prev","next","post","process","env","REACT_APP_SERVER_URL","sent","log","map","_objectSpread","time","t0","console","error","stop","columns","columnName","children","option","title","datas","type"],"sources":["D:/Git_Hub/JMEDUSERVER/react/sources/src/pages/admin/view_log.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport SearchBox from \"../../Components/searchBox/SearchBox\";\nimport { useState } from \"react\";\nimport BasicBox from \"../../Components/manage-box/BasicBox\";\nimport axios from \"axios\";\nimport { EDIT_TEACHER } from \"../../constants/searchFilter\";\nimport { Toast, notify } from \"../../template/Toastify\";\nimport DataTableV2 from \"../../Components/dataTableV2/DataTableV2\";\n\nexport default function ViewLog() {\n  const [data, setData] = useState();\n\n  useEffect(() => {\n    loging();\n  }, []);\n\n  // 시간 형식 변환 함수\n  const formatTime = (timeStr) => {\n    const date = new Date(timeStr);\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, \"0\");\n    const day = String(date.getDate()).padStart(2, \"0\");\n    const hours = String(date.getHours()).padStart(2, \"0\");\n    const minutes = String(date.getMinutes()).padStart(2, \"0\");\n\n    return `${year}-${month}-${day} ${hours}-${minutes}`;\n  };\n\n  // 데이터 가져오기\n  async function loging() {\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_SERVER_URL}/server/log/view`, {});\n      const logs = response.data.log.map((log) => ({\n        ...log,\n        time: formatTime(log.time),\n      }));\n      setData(logs);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  //데이터 테이블에 보일 컬럼\n  const columns = [\n    { columnName: \"선생\", data: \"teacher\" },\n    { columnName: \"시간\", data: \"time\" },\n    { columnName: \"로그\", data: \"log\" },\n  ];\n\n  return (\n    <>\n      <BasicBox>\n        <SearchBox setData={setData} option={\"teacher\"}></SearchBox>\n        <DataTableV2 title={\"로그 테이블\"} columns={columns} datas={data} type=\"admin_log\" />\n      </BasicBox>\n      <Toast />\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
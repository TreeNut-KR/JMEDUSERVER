{"ast":null,"code":"import _regeneratorRuntime from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import\"react-datepicker/dist/react-datepicker.css\";import{SEARCH_STUDENT,SEARCH_TEACHER,SEARCH_SUBJECT,SEARCH_SCHEDULE,SEARCH_SCHOOL}from\"../../constants/searchFilter\";import Button from\"../ButtonTop\";import DatePickerV1 from\"../datePicker/DatePicker\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function SearchBox(props){var today=new Date();var setData=props.setData,option=props.option,useDatePicker=props.useDatePicker;var _useState=useState(useDatePicker?today:null),_useState2=_slicedToArray(_useState,2),startDate=_useState2[0],setStartDate=_useState2[1];var _useState3=useState(useDatePicker?today:null),_useState4=_slicedToArray(_useState3,2),endDate=_useState4[0],setEndDate=_useState4[1];// 검색 옵션으로 들어올 것 지정\nvar filterOption=function filterOption(option){if(option===\"student\")return SEARCH_STUDENT;else if(option===\"teacher\")return SEARCH_TEACHER;else if(option===\"subject\")return SEARCH_SUBJECT;else if(option===\"schedule\")return SEARCH_SCHEDULE;else if(option===\"school\")return SEARCH_SCHOOL;else return[];};// 초기 옵션 배열을 가져옴\nvar options=filterOption(option);// 초기 상태 설정\nvar _useState5=useState({text:\"\",option:options.length>0?options[0].value:\"\"}),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];// api 지정\nvar endPoint=function endPoint(option){if(option===\"student\")return\"students_search\";else if(option===\"teacher\")return\"teachers_search\";else if(option===\"subject\")return\"subjects_search\";else if(option===\"schedule\")return\"schedules_search\";else if(option===\"school\")return\"schools_search\";else return false;};var handleSubmit=function handleSubmit(e){e.preventDefault();searchData();};function searchData(){return _searchData.apply(this,arguments);}function _searchData(){_searchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/server/\").concat(endPoint(option)),{search:search});case 3:response=_context.sent;setData(response.data.datas);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return _searchData.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"w-full p-10 fontA\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-40 border border-[#B3A492] shadow-md rounded-md p-5\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"flex gap-4 w-full flex-col\",onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-full flex\",children:[/*#__PURE__*/_jsx(\"select\",{className:\"w-24 mr-5 rounded-md border border-[#B3A492]\",onChange:function onChange(e){return setSearch({text:search.text,option:e.target.value});},value:search.option,id:\"\",children:Object.values(options).map(function(filter){return/*#__PURE__*/_jsx(\"option\",{value:filter.value,className:\"fontA\",children:filter.name},filter.value);})}),/*#__PURE__*/_jsx(\"input\",{className:\"px-2 w-full h-11 rounded-md border border-[#B3A492]\",name:\"nameText\",id:\"text-field\",placeholder:\"\\uAC80\\uC0C9\\uAE30\\uB2A5\\uC744 \\uC774\\uC6A9\\uD558\\uC2E4 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\",onChange:function onChange(e){return setSearch({text:e.target.value,option:search.option});},value:search.text})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex justify-end items-center gap-3 w-full\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center w-full h-full items-center\",children:useDatePicker?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"fontA text-lg\",children:\"\\uB0A0\\uC9DC : \"}),/*#__PURE__*/_jsx(DatePickerV1,{selected:startDate,onChange:function onChange(e){return setStartDate(e);}}),/*#__PURE__*/_jsx(\"span\",{className:\"px-10\",children:\"~\"}),/*#__PURE__*/_jsx(DatePickerV1,{selected:endDate,onChange:function onChange(e){return setEndDate(e);}})]}):null}),/*#__PURE__*/_jsx(\"button\",{className:\"text-xs w-16 h-10 px-2 rounded-md border bg-[#5272F2] text-white\",children:\"\\uAC80\\uC0C9\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setSearch({option:search.option,text:\"\"});},label:\"초기화\",children:\"\\uCD08\\uAE30\\uD654\"})]})]})})});}SearchBox.defaultProps={useDatePicker:false};","map":{"version":3,"names":["React","useState","useEffect","SEARCH_STUDENT","SEARCH_TEACHER","SEARCH_SUBJECT","SEARCH_SCHEDULE","SEARCH_SCHOOL","Button","DatePickerV1","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SearchBox","props","today","Date","setData","option","useDatePicker","_useState","_useState2","_slicedToArray","startDate","setStartDate","_useState3","_useState4","endDate","setEndDate","filterOption","options","_useState5","text","length","value","_useState6","search","setSearch","endPoint","handleSubmit","e","preventDefault","searchData","_searchData","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","post","concat","process","env","REACT_APP_SERVER_URL","sent","data","datas","t0","console","error","stop","className","children","onSubmit","onChange","target","id","Object","values","map","filter","name","placeholder","selected","onClick","label","defaultProps"],"sources":["D:/Git_Hub/JMEDUSERVER/react/sources/src/Components/searchBox/SearchBox.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport PropTypes from \"prop-types\";\nimport { SEARCH_STUDENT, SEARCH_TEACHER, SEARCH_SUBJECT, SEARCH_SCHEDULE, SEARCH_SCHOOL } from \"../../constants/searchFilter\";\nimport Button from \"../ButtonTop\";\nimport DatePickerV1 from \"../datePicker/DatePicker\";\nimport axios from \"axios\";\n\nexport default function SearchBox(props) {\n  const today = new Date();\n  const { setData, option, useDatePicker } = props;\n\n  const [startDate, setStartDate] = useState(useDatePicker ? today : null);\n  const [endDate, setEndDate] = useState(useDatePicker ? today : null);\n\n  // 검색 옵션으로 들어올 것 지정\n  const filterOption = (option) => {\n    if (option === \"student\") return SEARCH_STUDENT;\n    else if (option === \"teacher\") return SEARCH_TEACHER;\n    else if (option === \"subject\") return SEARCH_SUBJECT;\n    else if (option === \"schedule\") return SEARCH_SCHEDULE;\n    else if (option === \"school\") return SEARCH_SCHOOL;\n    else return [];\n  };\n\n  // 초기 옵션 배열을 가져옴\n  const options = filterOption(option);\n\n  // 초기 상태 설정\n  const [search, setSearch] = useState({\n    text: \"\",\n    option: options.length > 0 ? options[0].value : \"\",\n  });\n  // api 지정\n  const endPoint = (option) => {\n    if (option === \"student\") return \"students_search\";\n    else if (option === \"teacher\") return \"teachers_search\";\n    else if (option === \"subject\") return \"subjects_search\";\n    else if (option === \"schedule\") return \"schedules_search\";\n    else if (option === \"school\") return \"schools_search\";\n    else return false;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    searchData();\n  };\n\n  async function searchData() {\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_SERVER_URL}/server/${endPoint(option)}`, {\n        search: search,\n      });\n      setData(response.data.datas);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  return (\n    <div className=\"w-full p-10 fontA\">\n      <div className=\"w-full h-40 border border-[#B3A492] shadow-md rounded-md p-5\">\n        <form className=\"flex gap-4 w-full flex-col\" onSubmit={(e) => handleSubmit(e)}>\n          <div className=\"w-full flex\">\n            <select\n              className=\"w-24 mr-5 rounded-md border border-[#B3A492]\"\n              onChange={(e) => setSearch({ text: search.text, option: e.target.value })}\n              value={search.option}\n              id=\"\"\n            >\n              {Object.values(options).map((filter) => (\n                <option key={filter.value} value={filter.value} className=\"fontA\">\n                  {filter.name}\n                </option>\n              ))}\n            </select>\n            <input\n              className=\"px-2 w-full h-11 rounded-md border border-[#B3A492]\"\n              name=\"nameText\"\n              id=\"text-field\"\n              placeholder={`검색기능을 이용하실 수 있습니다.`}\n              onChange={(e) => setSearch({ text: e.target.value, option: search.option })}\n              value={search.text}\n            />\n          </div>\n          <div className=\"mt-3 flex justify-end items-center gap-3 w-full\">\n            <div className=\"flex justify-center w-full h-full items-center\">\n              {useDatePicker ? (\n                <>\n                  <span className=\"fontA text-lg\">날짜 : </span>\n                  <DatePickerV1 selected={startDate} onChange={(e) => setStartDate(e)} />\n                  <span className=\"px-10\">~</span>\n                  <DatePickerV1 selected={endDate} onChange={(e) => setEndDate(e)} />\n                </>\n              ) : null}\n            </div>\n            <button className=\"text-xs w-16 h-10 px-2 rounded-md border bg-[#5272F2] text-white\">검색</button>\n            <Button onClick={() => setSearch({ option: search.option, text: \"\" })} label={\"초기화\"}>\n              초기화\n            </Button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nSearchBox.propTypes = {\n  setData: PropTypes.func.isRequired,\n  option: PropTypes.string,\n  useDatePicker: PropTypes.bool,\n};\n\nSearchBox.defaultProps = {\n  useDatePicker: false,\n};\n"],"mappings":"8XAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,4CAA4C,CAEnD,OAASC,cAAc,CAAEC,cAAc,CAAEC,cAAc,CAAEC,eAAe,CAAEC,aAAa,KAAQ,8BAA8B,CAC7H,MAAO,CAAAC,MAAM,KAAM,cAAc,CACjC,MAAO,CAAAC,YAAY,KAAM,0BAA0B,CACnD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE1B,cAAe,SAAS,CAAAC,SAASA,CAACC,KAAK,CAAE,CACvC,GAAM,CAAAC,KAAK,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CACxB,GAAQ,CAAAC,OAAO,CAA4BH,KAAK,CAAxCG,OAAO,CAAEC,MAAM,CAAoBJ,KAAK,CAA/BI,MAAM,CAAEC,aAAa,CAAKL,KAAK,CAAvBK,aAAa,CAEtC,IAAAC,SAAA,CAAkCvB,QAAQ,CAACsB,aAAa,CAAGJ,KAAK,CAAG,IAAI,CAAC,CAAAM,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjEG,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAC9B,IAAAI,UAAA,CAA8B5B,QAAQ,CAACsB,aAAa,CAAGJ,KAAK,CAAG,IAAI,CAAC,CAAAW,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA7DE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAE1B;AACA,GAAM,CAAAG,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIX,MAAM,CAAK,CAC/B,GAAIA,MAAM,GAAK,SAAS,CAAE,MAAO,CAAAnB,cAAc,CAAC,IAC3C,IAAImB,MAAM,GAAK,SAAS,CAAE,MAAO,CAAAlB,cAAc,CAAC,IAChD,IAAIkB,MAAM,GAAK,SAAS,CAAE,MAAO,CAAAjB,cAAc,CAAC,IAChD,IAAIiB,MAAM,GAAK,UAAU,CAAE,MAAO,CAAAhB,eAAe,CAAC,IAClD,IAAIgB,MAAM,GAAK,QAAQ,CAAE,MAAO,CAAAf,aAAa,CAAC,IAC9C,OAAO,EAAE,CAChB,CAAC,CAED;AACA,GAAM,CAAA2B,OAAO,CAAGD,YAAY,CAACX,MAAM,CAAC,CAEpC;AACA,IAAAa,UAAA,CAA4BlC,QAAQ,CAAC,CACnCmC,IAAI,CAAE,EAAE,CACRd,MAAM,CAAEY,OAAO,CAACG,MAAM,CAAG,CAAC,CAAGH,OAAO,CAAC,CAAC,CAAC,CAACI,KAAK,CAAG,EAClD,CAAC,CAAC,CAAAC,UAAA,CAAAb,cAAA,CAAAS,UAAA,IAHKK,MAAM,CAAAD,UAAA,IAAEE,SAAS,CAAAF,UAAA,IAIxB;AACA,GAAM,CAAAG,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIpB,MAAM,CAAK,CAC3B,GAAIA,MAAM,GAAK,SAAS,CAAE,MAAO,iBAAiB,CAAC,IAC9C,IAAIA,MAAM,GAAK,SAAS,CAAE,MAAO,iBAAiB,CAAC,IACnD,IAAIA,MAAM,GAAK,SAAS,CAAE,MAAO,iBAAiB,CAAC,IACnD,IAAIA,MAAM,GAAK,UAAU,CAAE,MAAO,kBAAkB,CAAC,IACrD,IAAIA,MAAM,GAAK,QAAQ,CAAE,MAAO,gBAAgB,CAAC,IACjD,OAAO,MAAK,CACnB,CAAC,CAED,GAAM,CAAAqB,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,CAAC,CAAK,CAC1BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBC,UAAU,CAAC,CAAC,CACd,CAAC,CAAC,QAEa,CAAAA,UAAUA,CAAA,SAAAC,WAAA,CAAAC,KAAA,MAAAC,SAAA,YAAAF,YAAA,EAAAA,WAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAzB,SAAAC,QAAA,MAAAC,QAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAE2B,CAAAjD,KAAK,CAACkD,IAAI,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,oBAAoB,aAAAH,MAAA,CAAWnB,QAAQ,CAACpB,MAAM,CAAC,EAAI,CAClGkB,MAAM,CAAEA,MACV,CAAC,CAAC,QAFIc,QAAQ,CAAAG,QAAA,CAAAQ,IAAA,CAGd5C,OAAO,CAACiC,QAAQ,CAACY,IAAI,CAACC,KAAK,CAAC,CAACV,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAW,EAAA,CAAAX,QAAA,aAE7BY,OAAO,CAACC,KAAK,CAAAb,QAAA,CAAAW,EAAM,CAAC,CAAC,yBAAAX,QAAA,CAAAc,IAAA,MAAAlB,OAAA,gBAExB,UAAAN,WAAA,CAAAC,KAAA,MAAAC,SAAA,GAED,mBACErC,IAAA,QAAK4D,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChC7D,IAAA,QAAK4D,SAAS,CAAC,8DAA8D,CAAAC,QAAA,cAC3E3D,KAAA,SAAM0D,SAAS,CAAC,4BAA4B,CAACE,QAAQ,CAAE,SAAAA,SAAC9B,CAAC,QAAK,CAAAD,YAAY,CAACC,CAAC,CAAC,EAAC,CAAA6B,QAAA,eAC5E3D,KAAA,QAAK0D,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B7D,IAAA,WACE4D,SAAS,CAAC,8CAA8C,CACxDG,QAAQ,CAAE,SAAAA,SAAC/B,CAAC,QAAK,CAAAH,SAAS,CAAC,CAAEL,IAAI,CAAEI,MAAM,CAACJ,IAAI,CAAEd,MAAM,CAAEsB,CAAC,CAACgC,MAAM,CAACtC,KAAM,CAAC,CAAC,EAAC,CAC1EA,KAAK,CAAEE,MAAM,CAAClB,MAAO,CACrBuD,EAAE,CAAC,EAAE,CAAAJ,QAAA,CAEJK,MAAM,CAACC,MAAM,CAAC7C,OAAO,CAAC,CAAC8C,GAAG,CAAC,SAACC,MAAM,qBACjCrE,IAAA,WAA2B0B,KAAK,CAAE2C,MAAM,CAAC3C,KAAM,CAACkC,SAAS,CAAC,OAAO,CAAAC,QAAA,CAC9DQ,MAAM,CAACC,IAAI,EADDD,MAAM,CAAC3C,KAEZ,CAAC,EACV,CAAC,CACI,CAAC,cACT1B,IAAA,UACE4D,SAAS,CAAC,qDAAqD,CAC/DU,IAAI,CAAC,UAAU,CACfL,EAAE,CAAC,YAAY,CACfM,WAAW,2FAAuB,CAClCR,QAAQ,CAAE,SAAAA,SAAC/B,CAAC,QAAK,CAAAH,SAAS,CAAC,CAAEL,IAAI,CAAEQ,CAAC,CAACgC,MAAM,CAACtC,KAAK,CAAEhB,MAAM,CAAEkB,MAAM,CAAClB,MAAO,CAAC,CAAC,EAAC,CAC5EgB,KAAK,CAAEE,MAAM,CAACJ,IAAK,CACpB,CAAC,EACC,CAAC,cACNtB,KAAA,QAAK0D,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAC9D7D,IAAA,QAAK4D,SAAS,CAAC,gDAAgD,CAAAC,QAAA,CAC5DlD,aAAa,cACZT,KAAA,CAAAE,SAAA,EAAAyD,QAAA,eACE7D,IAAA,SAAM4D,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,iBAAK,CAAM,CAAC,cAC5C7D,IAAA,CAACH,YAAY,EAAC2E,QAAQ,CAAEzD,SAAU,CAACgD,QAAQ,CAAE,SAAAA,SAAC/B,CAAC,QAAK,CAAAhB,YAAY,CAACgB,CAAC,CAAC,EAAC,CAAE,CAAC,cACvEhC,IAAA,SAAM4D,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,GAAC,CAAM,CAAC,cAChC7D,IAAA,CAACH,YAAY,EAAC2E,QAAQ,CAAErD,OAAQ,CAAC4C,QAAQ,CAAE,SAAAA,SAAC/B,CAAC,QAAK,CAAAZ,UAAU,CAACY,CAAC,CAAC,EAAC,CAAE,CAAC,EACnE,CAAC,CACD,IAAI,CACL,CAAC,cACNhC,IAAA,WAAQ4D,SAAS,CAAC,kEAAkE,CAAAC,QAAA,CAAC,cAAE,CAAQ,CAAC,cAChG7D,IAAA,CAACJ,MAAM,EAAC6E,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA5C,SAAS,CAAC,CAAEnB,MAAM,CAAEkB,MAAM,CAAClB,MAAM,CAAEc,IAAI,CAAE,EAAG,CAAC,CAAC,EAAC,CAACkD,KAAK,CAAE,KAAM,CAAAb,QAAA,CAAC,oBAErF,CAAQ,CAAC,EACN,CAAC,EACF,CAAC,CACJ,CAAC,CACH,CAAC,CAEV,CAQAxD,SAAS,CAACsE,YAAY,CAAG,CACvBhE,aAAa,CAAE,KACjB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminPermissions(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tasks=_useState2[0],setTasks=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),editingIndex=_useState4[0],setEditingIndex=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newLevel=_useState6[0],setNewLevel=_useState6[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/server/admin_permissions\"));case 3:response=_context.sent;if(response.data.success){setTasks(response.data.teachers);}else{console.error('Failed to fetch data:',response.data.message);}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error('Error fetching data:',_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);var handleEditClick=function handleEditClick(index,currentLevel){setEditingIndex(index);setNewLevel(currentLevel);};var handleSaveClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(taskName){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/server/admin_permissions\"),{task_name:taskName,level:newLevel});case 3:response=_context2.sent;if(response.data.success){setTasks(function(prevTasks){return prevTasks.map(function(task,index){return index===editingIndex?_objectSpread(_objectSpread({},task),{},{level:newLevel}):task;});});setEditingIndex(null);setNewLevel(\"\");}else{console.error('Failed to save data:',response.data.message);}_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error('Error saving data:',_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function handleSaveClick(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uC791\\uC5C5\\uBCC4 \\uC694\\uAD6C \\uAD8C\\uD55C \\uB808\\uBCA8\\uC744 \\uC124\\uC815\\uD558\\uC138\\uC694.\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Task Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Level\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:tasks.length>0?tasks.map(function(task,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:task.task_name}),/*#__PURE__*/_jsx(\"td\",{children:editingIndex===index?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newLevel,onChange:function onChange(e){return setNewLevel(e.target.value);}}):task.level}),/*#__PURE__*/_jsx(\"td\",{children:editingIndex===index?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleSaveClick(task.task_name);},children:\"Save\"}):/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleEditClick(index,task.level);},children:\"Edit\"})})]},index);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",children:\"No data available\"})})})]})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","AdminPermissions","_useState","_useState2","_slicedToArray","tasks","setTasks","_useState3","_useState4","editingIndex","setEditingIndex","_useState5","_useState6","newLevel","setNewLevel","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","process","env","REACT_APP_SERVER_URL","sent","data","success","teachers","console","error","message","t0","stop","apply","arguments","handleEditClick","index","currentLevel","handleSaveClick","_ref2","_callee2","taskName","_callee2$","_context2","post","task_name","level","prevTasks","map","task","_objectSpread","_x","children","length","type","value","onChange","e","target","onClick","colSpan"],"sources":["D:/Git_Hub/JMEDUSERVER/react/sources/src/pages/admin/admin_permissions.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nexport default function AdminPermissions() {\n  const [tasks, setTasks] = useState([]);\n  const [editingIndex, setEditingIndex] = useState(null);\n  const [newLevel, setNewLevel] = useState(\"\");\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(`${process.env.REACT_APP_SERVER_URL}/server/admin_permissions`);\n        if (response.data.success) {\n          setTasks(response.data.teachers);\n        } else {\n          console.error('Failed to fetch data:', response.data.message);\n        }\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const handleEditClick = (index, currentLevel) => {\n    setEditingIndex(index);\n    setNewLevel(currentLevel);\n  };\n\n  const handleSaveClick = async (taskName) => {\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_SERVER_URL}/server/admin_permissions`, {\n        task_name: taskName,\n        level: newLevel,\n      });\n      if (response.data.success) {\n        setTasks((prevTasks) => \n          prevTasks.map((task, index) => \n            index === editingIndex ? { ...task, level: newLevel } : task\n          )\n        );\n        setEditingIndex(null);\n        setNewLevel(\"\");\n      } else {\n        console.error('Failed to save data:', response.data.message);\n      }\n    } catch (error) {\n      console.error('Error saving data:', error);\n    }\n  };\n\n  return (\n    <div>\n      <p>작업별 요구 권한 레벨을 설정하세요.</p>\n      <table>\n        <thead>\n          <tr>\n            <th>Task Name</th>\n            <th>Level</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {tasks.length > 0 ? (\n            tasks.map((task, index) => (\n              <tr key={index}>\n                <td>{task.task_name}</td>\n                <td>\n                  {editingIndex === index ? (\n                    <input \n                      type=\"text\" \n                      value={newLevel} \n                      onChange={(e) => setNewLevel(e.target.value)} \n                    />\n                  ) : (\n                    task.level\n                  )}\n                </td>\n                <td>\n                  {editingIndex === index ? (\n                    <button onClick={() => handleSaveClick(task.task_name)}>Save</button>\n                  ) : (\n                    <button onClick={() => handleEditClick(index, task.level)}>Edit</button>\n                  )}\n                </td>\n              </tr>\n            ))\n          ) : (\n            <tr>\n              <td colSpan=\"3\">No data available</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n"],"mappings":"ufAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1B,cAAe,SAAS,CAAAC,gBAAgBA,CAAA,CAAG,CACzC,IAAAC,SAAA,CAA0BP,QAAQ,CAAC,EAAE,CAAC,CAAAQ,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,IAAAI,UAAA,CAAwCZ,QAAQ,CAAC,IAAI,CAAC,CAAAa,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IACpC,IAAAG,UAAA,CAAgChB,QAAQ,CAAC,EAAE,CAAC,CAAAiB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAArCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAE5BlB,SAAS,CAAC,UAAM,CACd,GAAM,CAAAqB,SAAS,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAES,CAAA9B,KAAK,CAAC+B,GAAG,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,oBAAoB,6BAA2B,CAAC,QAA1FV,QAAQ,CAAAG,QAAA,CAAAQ,IAAA,CACd,GAAIX,QAAQ,CAACY,IAAI,CAACC,OAAO,CAAE,CACzB5B,QAAQ,CAACe,QAAQ,CAACY,IAAI,CAACE,QAAQ,CAAC,CAClC,CAAC,IAAM,CACLC,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAEhB,QAAQ,CAACY,IAAI,CAACK,OAAO,CAAC,CAC/D,CAACd,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAe,EAAA,CAAAf,QAAA,aAEDY,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAAb,QAAA,CAAAe,EAAO,CAAC,CAAC,yBAAAf,QAAA,CAAAgB,IAAA,MAAApB,OAAA,gBAEhD,kBAXK,CAAAL,SAASA,CAAA,SAAAC,IAAA,CAAAyB,KAAA,MAAAC,SAAA,OAWd,CAED3B,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAA4B,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAIC,KAAK,CAAEC,YAAY,CAAK,CAC/CnC,eAAe,CAACkC,KAAK,CAAC,CACtB9B,WAAW,CAAC+B,YAAY,CAAC,CAC3B,CAAC,CAED,GAAM,CAAAC,eAAe,6BAAAC,KAAA,CAAA9B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAA6B,SAAOC,QAAQ,MAAA5B,QAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAA4B,UAAAC,SAAA,iBAAAA,SAAA,CAAA1B,IAAA,CAAA0B,SAAA,CAAAzB,IAAA,SAAAyB,SAAA,CAAA1B,IAAA,GAAA0B,SAAA,CAAAzB,IAAA,SAEZ,CAAA9B,KAAK,CAACwD,IAAI,IAAAxB,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,oBAAoB,8BAA6B,CAChGsB,SAAS,CAAEJ,QAAQ,CACnBK,KAAK,CAAEzC,QACT,CAAC,CAAC,QAHIQ,QAAQ,CAAA8B,SAAA,CAAAnB,IAAA,CAId,GAAIX,QAAQ,CAACY,IAAI,CAACC,OAAO,CAAE,CACzB5B,QAAQ,CAAC,SAACiD,SAAS,QACjB,CAAAA,SAAS,CAACC,GAAG,CAAC,SAACC,IAAI,CAAEb,KAAK,QACxB,CAAAA,KAAK,GAAKnC,YAAY,CAAAiD,aAAA,CAAAA,aAAA,IAAQD,IAAI,MAAEH,KAAK,CAAEzC,QAAQ,GAAK4C,IAAI,EAC9D,CAAC,EACH,CAAC,CACD/C,eAAe,CAAC,IAAI,CAAC,CACrBI,WAAW,CAAC,EAAE,CAAC,CACjB,CAAC,IAAM,CACLsB,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAEhB,QAAQ,CAACY,IAAI,CAACK,OAAO,CAAC,CAC9D,CAACa,SAAA,CAAAzB,IAAA,iBAAAyB,SAAA,CAAA1B,IAAA,GAAA0B,SAAA,CAAAZ,EAAA,CAAAY,SAAA,aAEDf,OAAO,CAACC,KAAK,CAAC,oBAAoB,CAAAc,SAAA,CAAAZ,EAAO,CAAC,CAAC,yBAAAY,SAAA,CAAAX,IAAA,MAAAQ,QAAA,gBAE9C,kBApBK,CAAAF,eAAeA,CAAAa,EAAA,SAAAZ,KAAA,CAAAN,KAAA,MAAAC,SAAA,OAoBpB,CAED,mBACE1C,KAAA,QAAA4D,QAAA,eACE9D,IAAA,MAAA8D,QAAA,CAAG,iGAAoB,CAAG,CAAC,cAC3B5D,KAAA,UAAA4D,QAAA,eACE9D,IAAA,UAAA8D,QAAA,cACE5D,KAAA,OAAA4D,QAAA,eACE9D,IAAA,OAAA8D,QAAA,CAAI,WAAS,CAAI,CAAC,cAClB9D,IAAA,OAAA8D,QAAA,CAAI,OAAK,CAAI,CAAC,cACd9D,IAAA,OAAA8D,QAAA,CAAI,SAAO,CAAI,CAAC,EACd,CAAC,CACA,CAAC,cACR9D,IAAA,UAAA8D,QAAA,CACGvD,KAAK,CAACwD,MAAM,CAAG,CAAC,CACfxD,KAAK,CAACmD,GAAG,CAAC,SAACC,IAAI,CAAEb,KAAK,qBACpB5C,KAAA,OAAA4D,QAAA,eACE9D,IAAA,OAAA8D,QAAA,CAAKH,IAAI,CAACJ,SAAS,CAAK,CAAC,cACzBvD,IAAA,OAAA8D,QAAA,CACGnD,YAAY,GAAKmC,KAAK,cACrB9C,IAAA,UACEgE,IAAI,CAAC,MAAM,CACXC,KAAK,CAAElD,QAAS,CAChBmD,QAAQ,CAAE,SAAAA,SAACC,CAAC,QAAK,CAAAnD,WAAW,CAACmD,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,EAAC,CAC9C,CAAC,CAEFN,IAAI,CAACH,KACN,CACC,CAAC,cACLxD,IAAA,OAAA8D,QAAA,CACGnD,YAAY,GAAKmC,KAAK,cACrB9C,IAAA,WAAQqE,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAArB,eAAe,CAACW,IAAI,CAACJ,SAAS,CAAC,EAAC,CAAAO,QAAA,CAAC,MAAI,CAAQ,CAAC,cAErE9D,IAAA,WAAQqE,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAxB,eAAe,CAACC,KAAK,CAAEa,IAAI,CAACH,KAAK,CAAC,EAAC,CAAAM,QAAA,CAAC,MAAI,CAAQ,CACxE,CACC,CAAC,GAnBEhB,KAoBL,CAAC,EACN,CAAC,cAEF9C,IAAA,OAAA8D,QAAA,cACE9D,IAAA,OAAIsE,OAAO,CAAC,GAAG,CAAAR,QAAA,CAAC,mBAAiB,CAAI,CAAC,CACpC,CACL,CACI,CAAC,EACH,CAAC,EACL,CAAC,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}
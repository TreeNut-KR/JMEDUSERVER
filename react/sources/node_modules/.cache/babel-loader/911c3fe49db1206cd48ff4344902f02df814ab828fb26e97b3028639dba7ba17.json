{"ast":null,"code":"import _regeneratorRuntime from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from\"react\";import DataTableV1 from\"../../Components/dataTableV1/DataTableV1\";import SearchBox from\"../../Components/searchBox/SearchBox\";import{useState}from\"react\";import BasicBox from\"../../Components/manage-box/BasicBox\";import axios from\"axios\";import{EDIT_SCHOOL,EDIT_STUDENT}from\"../../constants/searchFilter\";import{Toast,notify}from\"../../template/Toastify\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function School(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];//배열 정수형으로 변환\nfunction arrayToSqlInString(arr){return arr.map(function(item){return\"'\".concat(item,\"'\");}).join(\", \");}useEffect(function(){loging();},[]);//데이터 가져오기\nfunction loging(){return _loging.apply(this,arguments);}//데이터 수정 (한번에)\nfunction _loging(){_loging=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/server/schools_search\"),{search:{option:\"\",text:\"\"}});case 3:response=_context.sent;setData(response.data.datas);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return _loging.apply(this,arguments);}function dataSubmit_all(_x,_x2){return _dataSubmit_all.apply(this,arguments);}//데이터 테이블에 보일 컬럼\nfunction _dataSubmit_all(){_dataSubmit_all=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(editText,studentArray){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/server/schools_view_update_all\"),{editObject:editText,editTarget:arrayToSqlInString(studentArray)});case 3:response=_context2.sent;if(response.data.success){notify({type:\"success\",text:\"수정이 완료됐습니다. 확인을 위해서는 새로고침을 해주세요\"});}else{notify({type:\"error\",text:\"수정 중 오류발생.\"});}_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return _dataSubmit_all.apply(this,arguments);}var columns=[{columnName:\"학교 명\",data:\"name\"}];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(BasicBox,{children:[/*#__PURE__*/_jsx(SearchBox,{setData:setData,option:\"school\"}),/*#__PURE__*/_jsx(DataTableV1,{title:\"학교관리 테이블\",columns:columns,datas:data,type:\"school\",editType:EDIT_SCHOOL,runSQL:dataSubmit_all})]}),/*#__PURE__*/_jsx(Toast,{})]});}","map":{"version":3,"names":["React","useEffect","DataTableV1","SearchBox","useState","BasicBox","axios","EDIT_SCHOOL","EDIT_STUDENT","Toast","notify","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","School","_useState","_useState2","_slicedToArray","data","setData","arrayToSqlInString","arr","map","item","concat","join","loging","_loging","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","post","process","env","REACT_APP_SERVER_URL","search","option","text","sent","datas","t0","console","error","stop","dataSubmit_all","_x","_x2","_dataSubmit_all","_callee2","editText","studentArray","_callee2$","_context2","editObject","editTarget","success","type","columns","columnName","children","title","editType","runSQL"],"sources":["D:/Git_Hub/JMEDUSERVER/react/sources/src/pages/student/school.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport DataTableV1 from \"../../Components/dataTableV1/DataTableV1\";\nimport SearchBox from \"../../Components/searchBox/SearchBox\";\nimport { useState } from \"react\";\nimport BasicBox from \"../../Components/manage-box/BasicBox\";\nimport axios from \"axios\";\nimport { EDIT_SCHOOL, EDIT_STUDENT } from \"../../constants/searchFilter\";\nimport { Toast, notify } from \"../../template/Toastify\";\n\nexport default function School() {\n  const [data, setData] = useState();\n\n  //배열 정수형으로 변환\n  function arrayToSqlInString(arr) {\n    return arr.map((item) => `'${item}'`).join(\", \");\n  }\n\n  useEffect(() => {\n    loging();\n  }, []);\n\n  //데이터 가져오기\n  async function loging() {\n    try {\n      const response = await axios.post(\n        `${process.env.REACT_APP_SERVER_URL}/server/schools_search`,\n        {search : { option: \"\", text: \"\"}}\n      );\n      setData(response.data.datas);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  //데이터 수정 (한번에)\n  async function dataSubmit_all(editText, studentArray) {\n    try {\n      const response = await axios.post(\n        `${process.env.REACT_APP_SERVER_URL}/server/schools_view_update_all`,\n        { editObject: editText, editTarget: arrayToSqlInString(studentArray) }\n      );\n      if (response.data.success) {\n        notify({\n          type: \"success\",\n          text: \"수정이 완료됐습니다. 확인을 위해서는 새로고침을 해주세요\",\n        });\n      } else {\n        notify({\n          type: \"error\",\n          text: \"수정 중 오류발생.\",\n        });\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  //데이터 테이블에 보일 컬럼\n  const columns = [\n    { columnName: \"학교 명\", data: \"name\" },\n  ];\n\n  return (\n    <>\n      <BasicBox>\n        <SearchBox setData={setData} option={\"school\"}></SearchBox>\n        <DataTableV1\n          title={\"학교관리 테이블\"}\n          columns={columns}\n          datas={data}\n          type=\"school\"\n          editType={EDIT_SCHOOL}\n          runSQL={dataSubmit_all}\n        />\n      </BasicBox>\n      <Toast />\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
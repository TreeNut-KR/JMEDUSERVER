{"ast":null,"code":"import _defineProperty from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import BasicBox from\"../../../Components/manage-box/BasicBox\";import InputBox from\"../../../Components/InputBox\";import{Toast,notify}from\"../../../template/Toastify\";import Button from\"../../../Components/ButtonTop\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function SubjectAdd(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),teachers=_useState2[0],setTeachers=_useState2[1];//picker인 선생 기본 템플릿\nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),teacher=_useState4[0],setTeacher=_useState4[1];//선생 정보 핸들러\nvar handleTeacherChange=function handleTeacherChange(newTeacher){setTeacher(newTeacher.name);setDataStudents(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{teacher:newTeacher.pk});});};var _useState5=useState({name:\"\",teacher:\"\",school:\"\",grade:\"\",is_personal:\"\"}),_useState6=_slicedToArray(_useState5,2),DataStudents=_useState6[0],setDataStudents=_useState6[1];//date 형식 맞춰주는 함수\nvar formatDatePart=function formatDatePart(dateString){if(dateString&&dateString.includes(\"T\")){return new Date(dateString).toISOString().split(\"T\")[0];}return dateString;};useEffect(function(){var loging=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var teachersResponse,teachersData,formattedTeachers;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/server/teacher_view\"),{});case 3:teachersResponse=_context.sent;teachersData=teachersResponse.data.teachers;formattedTeachers=teachersData.map(function(teacher){return _objectSpread(_objectSpread({},teacher),{},{birthday:formatDatePart(teacher.birthday)});});setTeachers(formattedTeachers);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error(\"Error fetching teachers:\",_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function loging(){return _ref.apply(this,arguments);};}();loging();},[]);// 폼 제출 핸들러\nvar handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_context2.next=4;return axios.post(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/server/subject/add\"),DataStudents,{headers:{\"Content-Type\":\"application/json\"}});case 4:response=_context2.sent;notify({type:\"success\",text:\"전송 중.\"});if(response.data.success){notify({type:\"success\",text:\"전송 완료.\"});}_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);notify({type:\"error\",text:\"에러 발생.\"});console.error(\"등록 중 오류 발생:\",_context2.t0);case 13:case\"end\":return _context2.stop();}},_callee2,null,[[1,9]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handleChange=function handleChange(field,value){setDataStudents(function(prevData){return _objectSpread(_objectSpread({},prevData),{},_defineProperty({},field,value));});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(BasicBox,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pt-3\",children:[/*#__PURE__*/_jsx(InputBox,{data:DataStudents.name,name:\"이름\",edit:function edit(value){return handleChange(\"name\",value);}}),/*#__PURE__*/_jsx(InputBox,{data:teacher,name:\"담당 강사\",edit:handleTeacherChange,type:\"picker\",table:\"teacher\",subData_picker:teachers}),/*#__PURE__*/_jsx(InputBox,{data:DataStudents.school,name:\"학교\",edit:function edit(value){return handleChange(\"school\",value);}}),/*#__PURE__*/_jsx(InputBox,{data:DataStudents.grade,name:\"학년\",edit:function edit(value){return handleChange(\"grade\",value);}}),/*#__PURE__*/_jsx(InputBox,{data:DataStudents.is_personal,name:\"개인 (1/0)\",edit:function edit(value){return handleChange(\"is_personal\",value);},type:\"radio\",options:[\"예\",\"아니요\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"m-5 flex justify-end pr-10\",children:/*#__PURE__*/_jsx(Button,{label:\"추가하기\",width:90,onClick:handleSubmit})})]}),/*#__PURE__*/_jsx(Toast,{})]});}","map":{"version":3,"names":["React","useEffect","useState","BasicBox","InputBox","Toast","notify","Button","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SubjectAdd","_useState","_useState2","_slicedToArray","teachers","setTeachers","_useState3","_useState4","teacher","setTeacher","handleTeacherChange","newTeacher","name","setDataStudents","prevState","_objectSpread","pk","_useState5","school","grade","is_personal","_useState6","DataStudents","formatDatePart","dateString","includes","Date","toISOString","split","loging","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","teachersResponse","teachersData","formattedTeachers","wrap","_callee$","_context","prev","next","post","concat","process","env","REACT_APP_SERVER_URL","sent","data","map","birthday","t0","console","error","stop","apply","arguments","handleSubmit","_ref2","_callee2","e","response","_callee2$","_context2","preventDefault","headers","type","text","success","_x","handleChange","field","value","prevData","_defineProperty","children","className","edit","table","subData_picker","options","label","width","onClick"],"sources":["D:/Git_Hub/JMEDUSERVER/react/sources/src/pages/teacher/subject-edit/subjectAdd.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport BasicBox from \"../../../Components/manage-box/BasicBox\";\nimport InputBox from \"../../../Components/InputBox\";\nimport { Toast, notify } from \"../../../template/Toastify\";\nimport Button from \"../../../Components/ButtonTop\";\nimport axios from \"axios\";\n\nexport default function SubjectAdd() {\n  const [teachers, setTeachers] = useState([]);\n\n  //picker인 선생 기본 템플릿\n  const [teacher, setTeacher] = useState(\"\");\n  //선생 정보 핸들러\n  const handleTeacherChange = (newTeacher) => {\n    setTeacher(newTeacher.name);\n    setDataStudents((prevState) => ({\n      ...prevState,\n      teacher: newTeacher.pk,\n    }));\n  };\n\n  const [DataStudents, setDataStudents] = useState({\n    name: \"\",\n    teacher: \"\",\n    school: \"\",\n    grade: \"\",\n    is_personal: \"\",\n  });\n\n  //date 형식 맞춰주는 함수\n  const formatDatePart = (dateString) => {\n    if (dateString && dateString.includes(\"T\")) {\n      return new Date(dateString).toISOString().split(\"T\")[0];\n    }\n    return dateString;\n  };\n\n  useEffect(() => {\n    const loging = async () => {\n      try {\n        const teachersResponse = await axios.post(`${process.env.REACT_APP_SERVER_URL}/server/teacher_view`, {});\n        const teachersData = teachersResponse.data.teachers;\n        const formattedTeachers = teachersData.map((teacher) => ({\n          ...teacher,\n          birthday: formatDatePart(teacher.birthday),\n        }));\n        setTeachers(formattedTeachers);\n      } catch (error) {\n        console.error(\"Error fetching teachers:\", error);\n      }\n    };\n\n    loging();\n  }, []);\n\n  // 폼 제출 핸들러\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_SERVER_URL}/server/subject/add`, DataStudents, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      notify({\n        type: \"success\",\n        text: \"전송 중.\",\n      });\n\n      if (response.data.success) {\n        notify({\n          type: \"success\",\n          text: \"전송 완료.\",\n        });\n      }\n    } catch (error) {\n      notify({\n        type: \"error\",\n        text: \"에러 발생.\",\n      });\n      console.error(\"등록 중 오류 발생:\", error);\n    }\n  };\n\n  const handleChange = (field, value) => {\n    setDataStudents((prevData) => ({\n      ...prevData,\n      [field]: value,\n    }));\n  };\n\n  return (\n    <>\n      <BasicBox>\n        <div className=\"pt-3\">\n          <InputBox data={DataStudents.name} name={\"이름\"} edit={(value) => handleChange(\"name\", value)} />\n          <InputBox\n            data={teacher}\n            name={\"담당 강사\"}\n            edit={handleTeacherChange}\n            type={\"picker\"}\n            table={\"teacher\"}\n            subData_picker={teachers}\n          />\n          <InputBox data={DataStudents.school} name={\"학교\"} edit={(value) => handleChange(\"school\", value)} />\n          <InputBox data={DataStudents.grade} name={\"학년\"} edit={(value) => handleChange(\"grade\", value)} />\n          <InputBox\n            data={DataStudents.is_personal}\n            name={\"개인 (1/0)\"}\n            edit={(value) => handleChange(\"is_personal\", value)}\n            type={\"radio\"}\n            options={[\"예\", \"아니요\"]}\n          />\n        </div>\n\n        <div className=\"m-5 flex justify-end pr-10\">\n          <Button label={\"추가하기\"} width={90} onClick={handleSubmit} />\n        </div>\n      </BasicBox>\n      <Toast />\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
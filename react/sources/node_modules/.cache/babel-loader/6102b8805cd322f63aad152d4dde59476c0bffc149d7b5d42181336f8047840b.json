{"ast":null,"code":"import _objectSpread from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserPermissions(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),teachers=_useState2[0],setTeachers=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),editingIndex=_useState4[0],setEditingIndex=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newAdminLevel=_useState6[0],setNewAdminLevel=_useState6[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/server/user_permissions\"));case 3:response=_context.sent;if(response.data.success){setTeachers(response.data.teachers);}else{console.error('Failed to fetch data:',response.data.message);}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error('Error fetching data:',_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);var handleEditClick=function handleEditClick(index,currentAdminLevel){setEditingIndex(index);setNewAdminLevel(currentAdminLevel);};var handleSaveClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(teacherPk){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/server/user_permissions\"),{teacher_pk:teacherPk,admin_level:newAdminLevel});case 3:response=_context2.sent;if(response.data.success){setTeachers(function(prevTeachers){return prevTeachers.map(function(teacher,index){return index===editingIndex?_objectSpread(_objectSpread({},teacher),{},{admin_level:newAdminLevel}):teacher;});});setEditingIndex(null);setNewAdminLevel(\"\");}else{console.error('Failed to save data:',response.data.message);}_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error('Error saving data:',_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function handleSaveClick(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uC5EC\\uAE30\\uC5D0 \\uD3B8\\uC9D1 \\uD398\\uC774\\uC9C0 \\uB0B4\\uC6A9\\uC744 \\uCD94\\uAC00\\uD558\\uC138\\uC694.\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Teacher Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Admin Level\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:teachers.length>0?teachers.map(function(teacher,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:teacher.name}),/*#__PURE__*/_jsx(\"td\",{children:editingIndex===index?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newAdminLevel,onChange:function onChange(e){return setNewAdminLevel(e.target.value);}}):teacher.admin_level}),/*#__PURE__*/_jsx(\"td\",{children:editingIndex===index?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleSaveClick(teacher.teacher_pk);},children:\"Save\"}):/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleEditClick(index,teacher.admin_level);},children:\"Edit\"})})]},index);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",children:\"No data available\"})})})]})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","UserPermissions","_useState","_useState2","_slicedToArray","teachers","setTeachers","_useState3","_useState4","editingIndex","setEditingIndex","_useState5","_useState6","newAdminLevel","setNewAdminLevel","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","process","env","REACT_APP_SERVER_URL","sent","data","success","console","error","message","t0","stop","apply","arguments","handleEditClick","index","currentAdminLevel","handleSaveClick","_ref2","_callee2","teacherPk","_callee2$","_context2","post","teacher_pk","admin_level","prevTeachers","map","teacher","_objectSpread","_x","children","length","name","type","value","onChange","e","target","onClick","colSpan"],"sources":["D:/Git_Hub/JMEDUSERVER/react/sources/src/pages/admin/user_permissions.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n\nexport default function UserPermissions() {\n  const [teachers, setTeachers] = useState([]);\n  const [editingIndex, setEditingIndex] = useState(null);\n  const [newAdminLevel, setNewAdminLevel] = useState(\"\");\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(`${process.env.REACT_APP_SERVER_URL}/server/user_permissions`);\n        if (response.data.success) {\n          setTeachers(response.data.teachers);\n        } else {\n          console.error('Failed to fetch data:', response.data.message);\n        }\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const handleEditClick = (index, currentAdminLevel) => {\n    setEditingIndex(index);\n    setNewAdminLevel(currentAdminLevel);\n  };\n\n  const handleSaveClick = async (teacherPk) => {\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_SERVER_URL}/server/user_permissions`, {\n        teacher_pk: teacherPk,\n        admin_level: newAdminLevel,\n      });\n      if (response.data.success) {\n        setTeachers((prevTeachers) => \n          prevTeachers.map((teacher, index) => \n            index === editingIndex ? { ...teacher, admin_level: newAdminLevel } : teacher\n          )\n        );\n        setEditingIndex(null);\n        setNewAdminLevel(\"\");\n      } else {\n        console.error('Failed to save data:', response.data.message);\n      }\n    } catch (error) {\n      console.error('Error saving data:', error);\n    }\n  };\n\n  return (\n    <div>\n      <p>여기에 편집 페이지 내용을 추가하세요.</p>\n      <table>\n        <thead>\n          <tr>\n            <th>Teacher Name</th>\n            <th>Admin Level</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {teachers.length > 0 ? (\n            teachers.map((teacher, index) => (\n              <tr key={index}>\n                <td>{teacher.name}</td>\n                <td>\n                  {editingIndex === index ? (\n                    <input \n                      type=\"text\" \n                      value={newAdminLevel} \n                      onChange={(e) => setNewAdminLevel(e.target.value)} \n                    />\n                  ) : (\n                    teacher.admin_level\n                  )}\n                </td>\n                <td>\n                  {editingIndex === index ? (\n                    <button onClick={() => handleSaveClick(teacher.teacher_pk)}>Save</button>\n                  ) : (\n                    <button onClick={() => handleEditClick(index, teacher.admin_level)}>Edit</button>\n                  )}\n                </td>\n              </tr>\n            ))\n          ) : (\n            <tr>\n              <td colSpan=\"3\">No data available</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _regeneratorRuntime from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Git_Hub/JMEDUSERVER/react/sources/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from\"react\";import DataTableV1 from\"../../Components/dataTableV1/DataTableV1\";import SearchBox from\"../../Components/searchBox/SearchBox\";import{useState}from\"react\";import BasicBox from\"../../Components/manage-box/BasicBox\";import axios from\"axios\";import{EDIT_SUBJECT}from\"../../constants/searchFilter\";import{Toast,notify}from\"../../template/Toastify\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ClassManageTeacher(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];//배열 정수형으로 변환\nfunction arrayToSqlInString(arr){return arr.map(function(item){return\"'\".concat(item,\"'\");}).join(\", \");}useEffect(function(){loging();},[]);//데이터 가져오기\nfunction loging(){return _loging.apply(this,arguments);}//데이터 수정 (한번에)\nfunction _loging(){_loging=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/server/subjects_view\"),{});case 3:response=_context.sent;setData(response.data.subjects);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return _loging.apply(this,arguments);}function dataSubmit_all(_x,_x2){return _dataSubmit_all.apply(this,arguments);}//데이터 테이블에 보일 컬럼\nfunction _dataSubmit_all(){_dataSubmit_all=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(editText,studentArray){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"\".concat(process.env.REACT_APP_SERVER_URL,\"/server/subjects_view_update_all\"),{editObject:editText,editTarget:arrayToSqlInString(studentArray)});case 3:response=_context2.sent;if(response.data.success){notify({type:\"success\",text:\"수정이 완료됐습니다. 확인을 위해서는 새로고침을 해주세요\"});}else{notify({type:\"error\",text:\"수정 중 오류발생.\"});}_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return _dataSubmit_all.apply(this,arguments);}var columns=[{columnName:\"과목이름\",data:\"name\"},{columnName:\"학년\",data:\"grade\"},{columnName:\"담당강사\",data:\"teacher_name\"}];console.log(data);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(BasicBox,{children:[/*#__PURE__*/_jsx(SearchBox,{setData:setData,option:\"subject\"}),/*#__PURE__*/_jsx(DataTableV1,{title:\"강의 목록 테이블\",columns:columns,datas:data,type:\"subject\",editType:EDIT_SUBJECT,runSQL:dataSubmit_all})]}),/*#__PURE__*/_jsx(Toast,{})]});}","map":{"version":3,"names":["React","useEffect","DataTableV1","SearchBox","useState","BasicBox","axios","EDIT_SUBJECT","Toast","notify","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ClassManageTeacher","_useState","_useState2","_slicedToArray","data","setData","arrayToSqlInString","arr","map","item","concat","join","loging","_loging","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","post","process","env","REACT_APP_SERVER_URL","sent","subjects","t0","console","error","stop","dataSubmit_all","_x","_x2","_dataSubmit_all","_callee2","editText","studentArray","_callee2$","_context2","editObject","editTarget","success","type","text","columns","columnName","log","children","option","title","datas","editType","runSQL"],"sources":["D:/Git_Hub/JMEDUSERVER/react/sources/src/pages/teacher/manage_subject.jsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport DataTableV1 from \"../../Components/dataTableV1/DataTableV1\";\nimport SearchBox from \"../../Components/searchBox/SearchBox\";\nimport { useState } from \"react\";\nimport BasicBox from \"../../Components/manage-box/BasicBox\";\nimport axios from \"axios\";\nimport { EDIT_SUBJECT } from \"../../constants/searchFilter\";\nimport { Toast, notify } from \"../../template/Toastify\";\n\nexport default function ClassManageTeacher() {\n  const [data, setData] = useState();\n\n  //배열 정수형으로 변환\n  function arrayToSqlInString(arr) {\n    return arr.map((item) => `'${item}'`).join(\", \");\n  }\n\n  useEffect(() => {\n    loging();\n  }, []);\n\n  //데이터 가져오기\n  async function loging() {\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_SERVER_URL}/server/subjects_view`, {});\n      setData(response.data.subjects);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  //데이터 수정 (한번에)\n  async function dataSubmit_all(editText, studentArray) {\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_SERVER_URL}/server/subjects_view_update_all`, {\n        editObject: editText,\n        editTarget: arrayToSqlInString(studentArray),\n      });\n      if (response.data.success) {\n        notify({\n          type: \"success\",\n          text: \"수정이 완료됐습니다. 확인을 위해서는 새로고침을 해주세요\",\n        });\n      } else {\n        notify({\n          type: \"error\",\n          text: \"수정 중 오류발생.\",\n        });\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  //데이터 테이블에 보일 컬럼\n  const columns = [\n    { columnName: \"과목이름\", data: \"name\" },\n    { columnName: \"학년\", data: \"grade\" },\n    { columnName: \"담당강사\", data: \"teacher_name\" },\n  ];\n  console.log(data);\n  return (\n    <>\n      <BasicBox>\n        <SearchBox setData={setData} option={\"subject\"}></SearchBox>\n        <DataTableV1\n          title={\"강의 목록 테이블\"}\n          columns={columns}\n          datas={data}\n          type=\"subject\"\n          editType={EDIT_SUBJECT}\n          runSQL={dataSubmit_all}\n        />\n      </BasicBox>\n      <Toast />\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}